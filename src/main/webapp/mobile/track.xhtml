<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition template="/templates/mobileadmin.xhtml">
            <ui:define name="title">Cargo Mobile - Powered by JEE 7</ui:define>
            <ui:param name="styleClass" value="page-track" />
            <ui:define name="content">
            <div class="page-cargogen">
                <div class="header">
                    <h1>Track Your Cargo</h1>
                </div><!-- .header -->
                <div class="wrapper">
                <div class="scroller">
                        <h:form id="trackingForm">
                            <fieldset>
                            <label for="input-origin" id="label-origin">
                                <span>Enter your Tracking ID</span>
                                <h:inputText id="trackingIdInput"
                                                     value="#{cargoTracker.trackingId}" />
                                <h:commandButton value="Track!"
                                                         action="#{cargoTracker.trackCargo()}" />
                            </label>
                            </fieldset>
                        </h:form>
                        <h:messages class="error" />
                        <h:panelGroup rendered="#{empty cargoTracker.cargo}">
                            <label>
                                <em>Hint: try tracking 'ABC123' or 'JKL567'.</em>
                            </label>
                        </h:panelGroup>
                        <h:panelGroup rendered="#{not empty cargoTracker.cargo}">
                            <ul id="sightings-list" class="table-view table-list">
                                <li>  
                                <h3>Cargo #{cargoTracker.cargo.trackingId} is now:
                                    #{cargoTracker.cargo.statusText}</h3>
                                <p>Estimated time of arrival in
                                    #{cargoTracker.cargo.destination}: #{cargoTracker.cargo.eta}</p>
                                <p>#{cargoTracker.cargo.nextExpectedActivity}</p>
                                <h:panelGroup rendered="#{cargoTracker.cargo.misdirected}">
                                    <p class="notify">
                                        <img src="#{request.contextPath}/images/error.png" alt="" />Cargo is
                                        misdirected
                                    </p>
                                </h:panelGroup>
                                <h:panelGroup rendered="#{not empty cargoTracker.cargo.events}">
                                    <h3>Handling History</h3>
                                    <ul style="list-style-type: none;">
                                        <ui:repeat value="#{cargoTracker.cargo.events}" var="leg">
                                            <li>
                                                <p>
                                                    <img style="vertical-align: top;"
                                                         src='#{request.contextPath}/images/#{leg.expected ? "tick" : "cross"}.png'
                                                         alt="" /> #{leg.description}
                                                </p>
                                            </li>
                                        </ui:repeat>
                                    </ul>
                                </h:panelGroup>
                                </li>
                            </ul>
                        </h:panelGroup>
                </div>
                </div>    
            </div>
            </ui:define>
    </ui:composition>
</html>